<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>인적사항 기록부</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <style>
    .pagination > li > a.active {
      background-color: #337ab7;
      color: white;
    }
  </style>
</head>
<body>

<div class="container">
  <h2><b>인적사항 기록부</b></h2>
  <p>사람의 이름, 나이, 주소 // 편집은 상세 정보에서 가능합니다.</p>            
  <button class="btn btn-primary mb-3" onclick="addRow()">추가</button>
  
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th style="text-align: center;">이 름</th>
        <th style="text-align: center;">나 이</th>
        <th style="text-align: center;">E-mail</th>
        <th style="text-align: center;">상세정보</th>
        <th style="text-align: center;">삭제기능</th>
      </tr>
    </thead>
    <tbody id="infoTable">
      <!-- JavaScript에서 행이 추가됨 -->
    </tbody>
  </table>
</div>

<div class="container text-center">               
  <ul class="pagination" id="pagination"></ul>
</div>

<script>
  const rowsPerPage = 6;
  let currentPage = 1;
  let data = [
    { name: "July", age: "25세", email: "july@example.com", detailUrl: "http://127.0.0.1:5500/menu-test-homepage/JsEx15_step02.html" },
    { name: "Jane", age: "26세", email: "jane@example.com", detailUrl: "http://127.0.0.1:5500/menu-test-homepage/JsEx15_step02.html" },
    { name: "Kim", age: "24세", email: "kim@example.com", detailUrl: "http://127.0.0.1:5500/menu-test-homepage/JsEx15_step02.html" },
    { name: "Lee", age: "27세", email: "lee@example.com", detailUrl: "http://127.0.0.1:5500/menu-test-homepage/JsEx15_step02.html" },
    { name: "Park", age: "23세", email: "park@example.com", detailUrl: "http://127.0.0.1:5500/menu-test-homepage/JsEx15_step02.html" },
    { name: "Choi", age: "28세", email: "choi@example.com", detailUrl: "http://127.0.0.1:5500/menu-test-homepage/JsEx15_step02.html" }
  ];

  function renderTable(page) {
    const table = document.getElementById("infoTable");
    table.innerHTML = "";
    currentPage = page;

    const start = (page - 1) * rowsPerPage;
    const end = start + rowsPerPage;
    const pageData = data.slice(start, end);

    pageData.forEach(person => {
      const row = table.insertRow();
      row.innerHTML = `
        <td style="text-align: center; vertical-align: middle;">${person.name}</td>
        <td style="text-align: center; vertical-align: middle;">${person.age}</td>
        <td style="text-align: center; vertical-align: middle;">${person.email}</td>
        <td style="text-align: center; vertical-align: middle;"><a href="${person.detailUrl}" class="btn btn-info">상세정보보기</a></td>
        <td style="text-align: center; vertical-align: middle;"><button class="btn btn-danger" onclick="deleteRow(${start + pageData.indexOf(person)})">삭제</button></td>
      `;
    });

    setupPagination();
  }

  function setupPagination() {
    const pagination = document.getElementById("pagination");
    pagination.innerHTML = "";

    const totalPages = Math.ceil(data.length / rowsPerPage);

    for (let i = 1; i <= totalPages; i++) {
      const li = document.createElement("li");
      li.innerHTML = `<a href="#">${i}</a>`;
      if (i === currentPage) li.querySelector('a').classList.add('active');
      li.addEventListener("click", () => renderTable(i));
      pagination.appendChild(li);
    }
  }

  function deleteRow(index) {
    if (confirm("정말 삭제하시겠습니까?")) {
      data.splice(index, 1);
      renderTable(currentPage > Math.ceil(data.length / rowsPerPage) ? currentPage - 1 : currentPage);
    }
  }

  function addRow() {
    const name = prompt("이름을 입력하세요:");
    if (!name) return;

    const age = prompt("나이를 입력하세요:");
    if (!age) return;

    const email = prompt("이메일을 입력하세요:");
    if (!email) return;

    const detailUrl = prompt("상세정보 페이지 URL을 입력하세요:", "http://127.0.0.1:5500/menu-test-homepage/JsEx15_step02.html");
    if (!detailUrl) return;

    data.push({ name, age, email, detailUrl });
    renderTable(Math.ceil(data.length / rowsPerPage));
    }

  // 초기 렌더링
  renderTable(1);
</script>

</body>
</html>
